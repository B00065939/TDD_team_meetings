<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>{% block title %}Welcome!{% endblock %}</title>
    {% block stylesheets %}
        <link rel="stylesheet" href="{{ asset('vendor/bootstrap/css/bootstrap.min.css') }}">
        <link rel="stylesheet" href="{{ asset('vendor/bootstrap/css/dashboard.css') }}">
        <link rel="stylesheet" href="{{ asset('vendor/fontawesome/css/font-awesome.min.css') }}">
    {% endblock %}
    <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}"/>
</head>
<body>

<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">S.T.M.S</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                {% if (is_granted('ROLE_USER') or is_granted('ROLE_SUPERVISOR') or  is_granted('ROLE_ADMIN')) %}
                    <li><a>Welcome {{ app.user.email }}</a></li>

                {% endif %}
                <li><a href="{{ path('homepage') }}">Dashboard</a></li>
                <li><a href="#">Help</a></li>
                {% if (is_granted('ROLE_USER') or is_granted('ROLE_SUPERVISOR') or  is_granted('ROLE_ADMIN')) %}
                    <li><a href="{{ path('logout') }}">Logout</a></li>

                {% endif %}
            </ul>
        </div>
    </div>
</nav>

<div class="container-fluid">
    <div class="row">
        <div class="col-sm-3 col-md-2 sidebar">
            <ul class="nav nav-sidebar">
                <li><a href="{{ path('homepage') }}">Dashboard</a></li>
                {% if (is_granted('ROLE_USER')) %}
                    <li ><a href="{{ path('user_panel') }}">Projects</a></li>
                {% endif %}
                {% if ( is_granted('ROLE_ADMIN')) %}
                    <li><a href="{{ path('new_user') }}">New User</a></li>
                {% endif %}
                {% if is_granted('ROLE_SUPERVISOR') %}
                    <li><a href="{{ path('new_project') }}">New Project</a></li>
                {% endif %}
                {% if is_granted('ROLE_ADD_USER_TO_PROJECT') %}
                    <li><a href="{{ path('add_user_to_project') }}">Add user to the project</a></li>
                {% endif %}
                {% if is_granted('ROLE_NEW_PROJECT_ROLE') %}
                    <li><a href="{{ path('new_project_role') }}">New Project Role</a></li>
                {% endif %}
            </ul>
            {% if project is defined %}
                <hr>
                <h4>Project:<br> {{ project.title }}</h4>
                <ul class="nav nav-sidebar">

                    {% if is_granted('ROLE_SHOW_PROJECT') %}
                        <li>
                            <a href="{{ path('show_project', {'project' : project.id}) }}">Show project</a>
                        </li>
                    {% endif %}

                    {% if is_granted('ROLE_NEW_MEETING') %}
                        <li>
                            <a href="{{ path('new_meeting', {'project': project.id}) }}">New Meeting</a>
                        </li>
                    {% endif %}
                    {% if is_granted('ROLE_ADD_USER_TO_CURRENT_PROJECT') %}
                        <li>
                            <a href="{{ path('add_user_to_current_project', {'project': project.id}) }}">Add user</a>
                        </li>
                    {% endif %}
                </ul>
            {% endif %}
            {% if meeting is defined %}
                <hr>
                <h4>Meeting:<br> {{ meeting.MDateTime|date }}</h4>
                <ul class="nav nav-sidebar">

                    {% if is_granted('ROLE_SHOW_MEETING') %}
                        <li>
                            <a href="{{ path('show_meeting', {'meeting': meeting.id}) }}">Show Meeting</a>
                        </li>
                    {% endif %}

                    {% if is_granted('ROLE_NEW_AGENDA_ITEM') %}
                        <li>
                            <a href="{{ path('new_agenda_item', {'meeting' : meeting.id}) }}">New Agenda Item</a>
                        </li>
                    {% endif %}

                    {#{% if is_granted('ROLE_ADD_USER_TO_CURRENT_PROJECT') %}#}
                    {#<li>#}
                    {#<a href="{{ path('add_user_to_current_project', {'project': project.id}) }}">Add user</a>#}
                    {#</li>#}
                    {#{% endif %}#}

                </ul>
            {% endif %}


        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
            <h1 class="page-header"> {% block pageHeader %} pageHeader {% endblock %} </h1>
            <h2 class="sub-header"> {% block subHeader %} subHeader {% endblock %} </h2>
            <div class="main-content">
                {% for msg in app.session.flashBag.get('success') %}
                    <div class="alert alert-success">
                        {{ msg }}
                    </div>
                {% endfor %}
                {% for msg in app.session.flashBag.get('error') %}
                    <div class="alert alert-warning">
                        {{ msg }}
                    </div>
                {% endfor %}

            </div>
            {% block body %} Body {% endblock %}
        </div>
    </div>
</div>

{% block javascripts %}
    <!-- Bootstrap core JavaScript ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="{{ asset('vendor/bootstrap/js/jquery.min.js') }}"></script>
    <script>window.jQuery || document.write('<script src="{{ asset('vendor/bootstrap/js/jquery.min.js') }}"><\/script>')</script>
    <script src="{{ asset('vendor/bootstrap/js/bootstrap.min.js') }}"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="{{ asset('vendor/bootstrap/js/ie10-viewport-bug-workaround.js') }}"></script>
{% endblock %}
</body>
</html>
